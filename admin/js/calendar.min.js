(function(b){var a={calendarWidget:function(I){var g=new Date();var M=msweb.urlGet("month");if(!M){M=g.getMonth()}var e=msweb.urlGet("year")||g.getYear()+1900;var u={month:M,year:e};b.extend(u,I);this.tdAditionalContent=u.tdAditionalContent||{};var q=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];var J=["Воскреснье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"];var K=D=parseInt(u.month);var l=K+1;l=String(l).length==1?"0"+l:l;var L=String(K).length==1?"0"+K:K;var E=K+2;E=String(E).length==1?"0"+E:E;var t=parseInt(u.year);var y=0;var G="";var w="",n;if(u.urlParams){for(var D=0;D<u.urlParams.length;D++){if(n=msweb.urlGet(u.urlParams[D])){w+="&"+u.urlParams[D]+"="+n}}}if(K==11){var c='<a href="?month='+1+"&amp;year="+(t+1);if(w){c+=w}c+='" title="'+q[0]+" "+(t+1)+'">'+q[0]+" "+(t+1)+"</a>"}else{var c='<a href="?month='+(K+1)+"&amp;year="+(t);if(w){c+=w}c+='" title="'+q[K+1]+" "+(t)+'">'+q[K+1]+" "+(t)+"</a>"}if(K==0){var s='<a href="?month='+12+"&amp;year="+(t-1);if(w){s+=w}s+='" title="'+q[11]+" "+(t-1)+'">'+q[11]+" "+(t-1)+"</a>"}else{var s='<a href="?month='+(K-1)+"&amp;year="+(t);if(w){s+=w}s+='" title="'+q[K-1]+" "+(t)+'">'+q[K-1]+" "+(t)+"</a>"}G+=('<div class="nav-prev">'+s+"</div>");G+=('<h3 id="current-month">'+q[K]+" "+t+"</h3>");G+=('<div class="nav-next">'+c+"</div>");G+=('<table class="calendar-month " id="calendar-month'+D+' " cellspacing="0">');G+="<tr>";for(var H=0;H<7;H++){G+='<th class="weekday">'+J[H]+"</th>"}G+="</tr>";var F=new Date(t,K,1);var r=F.getDay();var p=K==0?11:K-1;var k=p==11?t-1:t;var A=a.getDaysInMonth(p,k);r=(r==0&&F)?7:r;var D=0,C,x,h;var v=moment().format("D");var z=moment().format("Y");var f=moment().format("M")-1;var o;for(var B=0;B<42;B++){if((B<r)){C=A-r+B+1;x=String(C).length==1?"0"+C:C;o=t+"-"+L+"-"+x;h=(v==C&&z==t&&f==K);G+='<td class="other-month';if(u.tdClass){G+=" "+u.tdClass}if(h){G+=" today"}G+='" data-date="'+o+'"><span class="day">'+C+"</span>";if(this.tdAditionalContent[o]&&(typeof this.tdAditionalContent[o]==="string")){G+='<div class="calendar-additional-content">'+this.tdAditionalContent[o]+"</div>"}G+="</td>"}else{if((B>=r+a.getDaysInMonth(K,t))){D=D+1;C=D;x=String(C).length==1?"0"+C:C;o=t+"-"+E+"-"+x;h=(v==C&&z==t&&f==K);G+='<td class="other-month';if(u.tdClass){G+=" "+u.tdClass}if(h){G+=" today"}G+='" data-date="'+o+'"><span class="day">'+C+"</span>";if(this.tdAditionalContent[o]&&(typeof this.tdAditionalContent[o]==="string")){G+='<div class="calendar-additional-content">'+this.tdAditionalContent[o]+"</div>"}G+="</td>"}else{C=B-r+1;x=String(C).length==1?"0"+C:C;o=t+"-"+l+"-"+x;h=(v==C&&z==t&&f==K);G+='<td class="current-month';if(u.tdClass){G+=" "+u.tdClass}if(h){G+=" today"}G+='" data-date="'+o+'"><span class="day">'+C+"</span>";if(this.tdAditionalContent[o]&&(typeof this.tdAditionalContent[o]==="string")){G+='<div class="calendar-additional-content">'+this.tdAditionalContent[o]+"</div>"}G+="</td>"}}if(B%7==6){G+=("</tr>")}}G+=("</table>");this.html(G);if(u.onselectday&&typeof u.onselectday==="function"){this.find("td.other-month, td.current-month").click(function(){var d=this.getAttribute("data-date");u.onselectday(d,this)})}},getDaysInMonth:function(e,d){var c=[31,28,31,30,31,30,31,31,30,31,30,31];if((e==1)&&(d%4==0)&&((d%100!=0)||(d%400==0))){return 29}else{return c[e]}},setAdditionalContent:function(d,e){var f=this.find('[data-date="'+d+'"]');if(!f.length){return}var c=f.find("div.calendar-additional-content");if(!c.length){c=b("<div>",{"class":"calendar-additional-content"});f.append(c)}c.html(e)}};b.fn.calendarWidget=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.calendarWidget.apply(this,arguments)}else{b.error("Метод с именем "+c+" не существует для jQuery.tooltip")}}}})(jQuery);